{
  "meta": {
    "project": "KPKN Training App",
    "date": "2026-02-21",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "KPKN is a single-page app for programming, recording and monitoring strength and hypertrophy training with integrated nutrition tracking and advanced fatigue monitoring to make training sustainable over time. The app provides program creation/editing, session and workout tracking, an exercise/food database, and local data persistence for offline-first use.",
  "core_goals": [
    "Provide powerful, flexible program creation and editing (wizard + advanced editor) for strength/hypertrophy programming.",
    "Enable detailed session and live workout tracking (sets, reps, weight, RPE, timers, competition judging).",
    "Track nutrition alongside training via an integrated food database and meal logging.",
    "Offer a searchable exercise and food database with ability to add custom entries.",
    "Persist all user data locally to support offline use and fast interactions.",
    "Expose fatigue and recovery analytics to help balance stimulus-progress-recovery decisions."
  ],
  "features": [
    {
      "name": "Home Dashboard",
      "description": "Main home screen showing active program card, quick access tabs (Programs, Nutrition, Your Lab), 1RM analytics and recovery indicators, and the Plus log hub.",
      "user_flows": [
        "Navigate to / -> View home dashboard with active program card -> Tap active program card to open program detail -> See program detail screen",
        "Navigate to / -> View home dashboard -> See no active program message -> Tap Plus button for log hub -> See log hub"
      ]
    },
    {
      "name": "Programs List",
      "description": "List and manage training programs; create new programs, open program details, and delete programs by swiping.",
      "user_flows": [
        "Navigate to / -> Tap Programs tab to open programs list -> View list of programs -> Tap Nuevo to create program -> Fill program name -> Configure blocks -> Configure mesocycles -> Configure weeks -> Save program -> See new program in list",
        "Navigate to / -> Tap Programs tab to open programs list -> Tap Nuevo to create program -> Leave program name empty -> Try to Save program -> See validation error 'Name required'"
      ]
    },
    {
      "name": "Program Detail",
      "description": "View a program's macrocycle and weekly structure, browse sessions and start workouts from the program view.",
      "user_flows": [
        "Navigate to / -> Tap Programs tab to open programs list -> Tap program card to open program detail -> View program structure and sessions -> Switch between weekly and macrocycle view -> Tap Start workout button -> See workout session screen",
        "Navigate to / -> Tap Programs tab to open programs list -> Tap program card to open program detail -> View program structure and sessions -> Tap Start workout button -> See error 'No sessions defined'"
      ]
    },
    {
      "name": "Program Editor",
      "description": "Create or edit programs using a step-by-step wizard or advanced editor; configure program blocks, mesocycles and weeks, then save or cancel.",
      "user_flows": [
        "Navigate to / -> Tap Programs tab to open programs list -> Tap Nuevo to create program -> Open wizard editor -> Configure blocks -> Configure mesocycles -> Configure weeks -> Save program -> Return to programs list with new program",
        "Navigate to / -> Tap Programs tab to open programs list -> Tap Nuevo to create program -> Open wizard editor -> Configure blocks -> Cancel creation -> Return to programs list without new program"
      ]
    },
    {
      "name": "Session Editor",
      "description": "Edit individual sessions: add/remove exercises, set sets/reps/weight/RPE, mark competition lifts, and save session changes.",
      "user_flows": [
        "Navigate to / -> Tap Programs tab to open programs list -> Tap program card to open program detail -> Tap session to edit -> Add exercise -> Edit sets -> Edit reps -> Edit weight -> Edit RPE -> Mark competition lifts as needed -> Save session -> See updated session in program detail",
        "Navigate to / -> Tap Programs tab to open programs list -> Tap program card to open program detail -> Tap session to edit -> Add exercise -> Leave sets incomplete -> Try to Save session -> See validation error 'Complete set details'"
      ]
    },
    {
      "name": "Workout Session",
      "description": "Live workout tracking for completing sets, using rest timers, and using judging lights for competition lifts; finish or cancel workouts and view summaries.",
      "user_flows": [
        "Navigate to / -> Tap Programs tab to open programs list -> Tap program card to open program detail -> Tap Start workout button -> Complete sets with weight and reps -> Use rest timer between sets -> Tap judging lights for competition lifts when required -> Finish workout -> See workout summary",
        "Navigate to / -> Tap Programs tab to open programs list -> Tap program card to open program detail -> Tap Start workout button -> Cancel workout -> Confirm cancel -> Return to program detail and lose unsaved workout progress"
      ]
    },
    {
      "name": "Nutrition View",
      "description": "Nutrition dashboard and meal logging with access to the food database for adding foods and tracking intake.",
      "user_flows": [
        "Navigate to / -> Tap Nutrition tab to open nutrition view -> View nutrition dashboard -> Tap Log meal -> Search food database -> Select food item -> Enter portion -> Save meal -> See nutrition dashboard updated",
        "Navigate to / -> Tap Nutrition tab to open nutrition view -> Tap Log meal -> Search food database -> Select food item -> Leave portion empty -> Try to Save meal -> See validation error 'Portion required'"
      ]
    },
    {
      "name": "Your Lab (Exercise & Food Database)",
      "description": "Browse and manage the exercise and food databases; add custom exercises and foods for reuse in sessions and meals.",
      "user_flows": [
        "Navigate to / -> Tap Your Lab tab to open exercise/food database -> Browse exercise database -> Open exercise detail -> Add custom exercise -> Fill required fields -> Save custom exercise -> See custom exercise in database",
        "Navigate to / -> Tap Your Lab tab to open exercise/food database -> Add custom exercise -> Enter duplicate exercise name -> Try to Save custom exercise -> See error 'Duplicate exercise name'"
      ]
    },
    {
      "name": "Settings",
      "description": "Manage app preferences such as theme, haptics and sound, and data management actions (export/clear) stored locally.",
      "user_flows": [
        "Navigate to / -> Open Settings -> Change theme -> Toggle haptics -> Toggle sound -> Save preferences -> See settings updated",
        "Navigate to / -> Open Settings -> Choose Manage data -> Select Clear local data -> Confirm clear -> See notification 'Data cleared' and return to home dashboard"
      ]
    }
  ],
  "code_summary": {
    "version": "2",
    "type": "frontend",
    "tech_stack": [
      "TypeScript",
      "React",
      "React 19",
      "Tailwind CSS",
      "Capacitor",
      "Recharts",
      "esbuild",
      "Zod"
    ],
    "routes": [
      {
        "path": "/",
        "file": "index.html",
        "auth_required": false,
        "description": "Single-page app entry, client-side routing via state"
      }
    ],
    "features": [
      {
        "name": "Home Dashboard",
        "description": "Main home screen with active program, quick actions, 1RM analytics widget, muscle recovery",
        "files": [
          "components/Home.tsx",
          "App.tsx"
        ],
        "entry_route": "/",
        "user_interactions": [
          "View home dashboard with active program card",
          "Tap Programs tab to open programs list",
          "Tap Nutrition tab to open nutrition view",
          "Tap Your Lab tab to open exercise/food database",
          "Tap Plus button for log hub",
          "Tap active program card to open program detail"
        ],
        "api_calls": [],
        "auth_required": false
      },
      {
        "name": "Programs List",
        "description": "List of training programs, create new, swipe to delete, tap to open detail",
        "files": [
          "components/ProgramsView.tsx",
          "App.tsx"
        ],
        "entry_route": "/",
        "user_interactions": [
          "View list of programs",
          "Tap Nuevo to create program",
          "Tap program card to open program detail",
          "Swipe program card left to delete"
        ],
        "api_calls": [],
        "auth_required": false
      },
      {
        "name": "Program Detail",
        "description": "Program overview with macrocycle/weekly view, sessions, start workout",
        "files": [
          "components/ProgramDetail.tsx",
          "App.tsx"
        ],
        "entry_route": "/",
        "user_interactions": [
          "View program structure and sessions",
          "Switch between weekly and macrocycle view",
          "Tap session to edit",
          "Tap Start workout button",
          "Use back button to return to programs list"
        ],
        "api_calls": [],
        "auth_required": false
      },
      {
        "name": "Program Editor",
        "description": "Create or edit training programs with wizard or advanced editor",
        "files": [
          "components/ProgramEditor.tsx",
          "App.tsx"
        ],
        "entry_route": "/",
        "user_interactions": [
          "Create new program via wizard",
          "Edit existing program in advanced editor",
          "Configure blocks, mesocycles, weeks",
          "Save or cancel"
        ],
        "api_calls": [],
        "auth_required": false
      },
      {
        "name": "Session Editor",
        "description": "Edit individual session with exercises and sets",
        "files": [
          "components/SessionEditor.tsx",
          "App.tsx"
        ],
        "entry_route": "/",
        "user_interactions": [
          "Add or remove exercises",
          "Edit sets, reps, weight, RPE",
          "Mark competition lifts",
          "Save session"
        ],
        "api_calls": [],
        "auth_required": false
      },
      {
        "name": "Workout Session",
        "description": "Live workout tracking with set completion, timers, judging lights for competition lifts",
        "files": [
          "components/WorkoutSession.tsx",
          "App.tsx"
        ],
        "entry_route": "/",
        "user_interactions": [
          "Complete sets with weight and reps",
          "Use rest timer",
          "Tap judging lights for competition lifts",
          "Finish or cancel workout"
        ],
        "api_calls": [],
        "auth_required": false
      },
      {
        "name": "Nutrition View",
        "description": "Nutrition tracking and meal logging",
        "files": [
          "components/NutritionView.tsx",
          "App.tsx"
        ],
        "entry_route": "/",
        "user_interactions": [
          "View nutrition dashboard",
          "Log meals",
          "Navigate to food database"
        ],
        "api_calls": [],
        "auth_required": false
      },
      {
        "name": "KPKN",
        "description": "Exercise and food database, custom exercises",
        "files": [
          "components/KPKNView.tsx",
          "components/ExerciseDatabaseView.tsx",
          "components/FoodDatabaseView.tsx"
        ],
        "entry_route": "/",
        "user_interactions": [
          "Browse exercise database",
          "Add custom exercises",
          "Browse food database"
        ],
        "api_calls": [],
        "auth_required": false
      },
      {
        "name": "Settings",
        "description": "App settings, theme, preferences",
        "files": [
          "components/SettingsComponent.tsx",
          "App.tsx"
        ],
        "entry_route": "/",
        "user_interactions": [
          "Change theme",
          "Toggle haptics and sound",
          "Manage data"
        ],
        "api_calls": [],
        "auth_required": false
      }
    ],
    "known_limitations": [
      {
        "issue": "Navigation is state-based, no URL routes; all views reached via tab bar and buttons",
        "location": "contexts/AppContext.tsx",
        "impact": "TestSprite must interact with UI elements to navigate, not URL navigation"
      },
      {
        "issue": "Data stored in localStorage, no backend API",
        "location": "services/storageService.ts",
        "impact": "No API calls to test; all data is client-side"
      }
    ]
  }
}
